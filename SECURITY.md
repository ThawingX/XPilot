# 安全指南

本文档提供了关于如何安全地开发和部署 XPilot 项目的指南。

## 敏感信息管理

### 环境变量

所有敏感信息（API密钥、令牌、密码等）应通过环境变量管理：

1. **本地开发**：
   - 使用 `.env.local` 文件（已在 .gitignore 中忽略）
   - 永远不要提交包含真实凭据的 `.env` 文件

2. **生产环境**：
   - 在部署平台（如 Vercel）的环境变量设置中配置
   - 定期轮换密钥和令牌

### 示例文件

项目包含以下示例文件，用于指导配置但不包含真实凭据：

- `.env.example` - 环境变量模板
- `DEPLOYMENT.example.md` - 部署配置指南

## 不应提交到代码仓库的文件类型

以下文件类型包含敏感信息，不应提交到代码仓库：

1. **环境变量文件**：
   - `.env`
   - `.env.local`
   - `.env.development`
   - `.env.production`
   - `.env.*.local`

2. **密钥和证书**：
   - `*.key`
   - `*.pem`
   - `*.p12`
   - `*.pfx`
   - `*.crt`
   - `*.cer`

3. **配置文件**：
   - 包含真实凭据的配置文件
   - 数据库配置文件

4. **临时文件和日志**：
   - `*.log`
   - `*.tmp`
   - `*.temp`
   - `*.cache`
   - `*.bak`

5. **Supabase 临时文件**：
   - `supabase/.temp/` 目录下的所有文件

## 安全最佳实践

1. **API 密钥保护**：
   - 使用环境变量存储 API 密钥
   - 在前端代码中，通过后端代理访问第三方 API
   - 设置适当的 API 密钥权限和范围

2. **认证与授权**：
   - 使用 Supabase 提供的认证服务
   - 实施适当的授权检查
   - 使用 HTTPS 保护所有通信

3. **数据保护**：
   - 敏感数据加密存储
   - 实施适当的数据访问控制
   - 定期备份数据

4. **依赖项安全**：
   - 定期更新依赖项
   - 使用 `npm audit` 或类似工具检查漏洞
   - 避免使用已知有安全问题的包

5. **部署安全**：
   - 使用 HTTPS
   - 配置适当的 CSP (Content Security Policy)
   - 实施适当的 CORS 策略

## 安全问题报告

如果您发现安全漏洞，请通过以下方式报告：

1. 不要在公共 issue tracker 中披露
2. 发送详细信息到项目维护者的电子邮件
3. 包括复现步骤和潜在影响

## 定期安全审查

建议定期进行以下安全审查：

1. 代码审查，特别关注安全敏感部分
2. 依赖项漏洞扫描
3. 环境变量和配置审查
4. 访问控制和权限审查