```mermaid
flowchart TD
    A[用户访问 X-Pilot] --> B{是否已登录?}
    B -->|否| C[显示登录页面]
    B -->|是| D{是否完成 Onboarding?}
    
    C --> C1[用户登录]
    C1 --> D
    
    D -->|否| E[开始 Onboarding 流程]
    D -->|是| Z[进入主应用]
    
    %% Onboarding 流程
    E --> F[第一步: 功能介绍页面]
    F --> F1[展示 X-Pilot 核心功能]
    F1 --> F2[🤖 AI 驱动内容策略]
    F1 --> F3[📊 智能互动队列]
    F1 --> F4[🎯 精准目标分析]
    F1 --> F5[📈 实时效果追踪]
    
    F2 --> G[Connect X 按钮]
    F3 --> G
    F4 --> G
    F5 --> G
    
    G --> H[跳转到 Twitter OAuth]
    H --> I{授权成功?}
    I -->|否| H1[显示错误信息]
    H1 --> H
    I -->|是| J[第二步: Inspiration Accounts 选择]
    
    %% Inspiration Accounts 选择流程
    J --> J1[显示推荐账户列表]
    J1 --> J2[按行业分类展示]
    J2 --> J3[用户浏览账户]
    J3 --> J4{用户操作}
    
    J4 -->|搜索账户| J5[输入搜索关键词]
    J5 --> J6[显示搜索结果]
    J6 --> J7[选择搜索结果中的账户]
    J7 --> J8[添加到已选列表]
    
    J4 -->|直接选择| J8
    J4 -->|跳过此步骤| K
    
    J8 --> J9{已选择账户数量}
    J9 -->|少于3个| J10[提示至少选择3个账户]
    J10 --> J3
    J9 -->|3个或以上| J11[启用继续按钮]
    J11 --> J12[用户点击继续]
    J12 --> K[保存选择的账户到数据库]
    
    %% 未来功能预留
    K --> K1[第2.5步: 回复内容配置<br/>🚧 未来功能]
    K1 -.-> L[第三步: 跳转到 Engagement Queue]
    K --> L
    
    %% Engagement Queue 引导流程
    L --> L1[显示 Engagement Queue 页面]
    L1 --> L2[自动展开 AI 助手面板]
    L2 --> L3[AI 发起欢迎对话]
    L3 --> L4["🤖: 欢迎！让我们制定您的营销策略"]
    
    L4 --> M[AI 引导对话流程]
    M --> M1["🤖: 请告诉我您的营销目标"]
    M1 --> M2[用户输入营销目标]
    M2 --> M3["🤖: 基于您的目标，我建议..."]
    M3 --> M4[AI 提供策略建议]
    M4 --> M5[用户确认或调整策略]
    M5 --> M6["🤖: 让我们制定具体计划"]
    M6 --> M7[AI 协助制定执行计划]
    M7 --> M8[用户确认计划]
    M8 --> M9["🤖: 现在让我们开始第一个任务"]
    
    M9 --> N[引导用户完成首次任务]
    N --> N1{选择任务类型}
    N1 -->|Auto Reply| N2[设置自动回复规则]
    N1 -->|Auto Repost| N3[选择转发内容]
    N1 -->|Starred| N4[标记重点互动机会]
    N1 -->|Outreach| N5[制定外联策略]
    
    N2 --> O[完成首次任务]
    N3 --> O
    N4 --> O
    N5 --> O
    
    O --> P[标记 Onboarding 完成]
    P --> Q[显示完成祝贺页面]
    Q --> R["🎉 设置完成！开始您的 X 营销之旅"]
    R --> S[进入主应用界面]
    
    %% 主应用功能模块
    S --> T[主应用功能菜单]
    T --> T1[📊 Dashboard - 数据概览]
    T --> T2[👥 Inspiration Accounts - 灵感账户]
    T --> T3[❤️ Auto Engagement - 自动互动]
    T --> T4[💬 Get Post/Thread - 内容获取]
    T --> T5[🎯 Marketing Strategy - 营销策略]
    T --> T6[⚙️ Config - 系统配置]
    T --> T7[👤 Profile - 个人资料]
    
    %% 用户可以在任意时间访问这些功能
    T1 --> U[用户正常使用应用]
    T2 --> U
    T3 --> U
    T4 --> U
    T5 --> U
    T6 --> U
    T7 --> U
    
    %% 样式定义
    classDef startEnd fill:#4792E6,stroke:#333,stroke-width:2px,color:#fff
    classDef process fill:#e1f5fe,stroke:#4792E6,stroke-width:2px
    classDef decision fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef aiProcess fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    classDef future fill:#f5f5f5,stroke:#999,stroke-width:1px,stroke-dasharray: 5 5
    
    class A,S,U startEnd
    class F,F1,G,J,J1,L,L1,O,P,Q,R process
    class B,D,I,J4,J9,N1 decision
    class M,M1,M3,M4,M6,M7,M9 aiProcess
    class K1 future
```